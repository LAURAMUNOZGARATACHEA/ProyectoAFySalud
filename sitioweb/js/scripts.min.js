!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).DOMPurify=t()}(this,function(){"use strict";var r=Object.hasOwnProperty,a=Object.setPrototypeOf,o=Object.isFrozen,ye=Object.keys,we=Object.freeze,e=Object.seal,t="undefined"!=typeof Reflect&&Reflect,l=t.apply,i=t.construct;l||(l=function(e,t,n){return e.apply(t,n)}),we||(we=function(e){return e}),e||(e=function(e){return e}),i||(i=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var _e=n(Array.prototype.forEach),Te=n(Array.prototype.indexOf),Ae=n(Array.prototype.join),$e=n(Array.prototype.pop),xe=n(Array.prototype.push),Ne=n(Array.prototype.slice),ke=n(String.prototype.toLowerCase),Me=n(String.prototype.match),Se=n(String.prototype.replace),Ce=n(String.prototype.indexOf),Ee=n(String.prototype.trim),Le=n(RegExp.prototype.test),Oe=s(RegExp),He=s(TypeError);function n(i){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return l(i,e,n)}}function s(r){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(r,t)}}function De(e,t){a&&a(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var i=ke(r);i!==r&&(o(t)||(t[n]=i),r=i)}e[r]=!0}return e}function Fe(e){var t={},n=void 0;for(n in e)l(r,e,[n])&&(t[n]=e[n]);return t}var Re=we(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ie=we(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),je=we(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qe=we(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Pe=we(["#text"]),ze=we(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),Be=we(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Je=we(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ue=we(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ve=e(/\{\{[\s\S]*|[\s\S]*\}\}/gm),We=e(/<%[\s\S]*|[\s\S]*%>/gm),Ge=e(/^data-[\-\w.\u00B7-\uFFFF]/),Qe=e(/^aria-[\-\w]+$/),Ye=e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ke=e(/^(?:\w+script|data):/i),Ze=e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function et(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}return function t(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,p=function(e){return t(e)};if(p.version="2.0.12",p.removed=[],!u||!u.document||9!==u.document.nodeType)return p.isSupported=!1,p;var c=u.document,o=!1,l=u.document,d=u.DocumentFragment,e=u.HTMLTemplateElement,m=u.Node,n=u.NodeFilter,r=u.NamedNodeMap,a=void 0===r?u.NamedNodeMap||u.MozNamedAttrMap:r,s=u.Text,f=u.Comment,h=u.DOMParser,i=u.trustedTypes;if("function"==typeof e){var b=l.createElement("template");b.content&&b.content.ownerDocument&&(l=b.content.ownerDocument)}var v=function(e,t){if("object"!==(void 0===e?"undefined":Xe(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(i,c),g=v&&Y?v.createHTML(""):"",y=l,w=y.implementation,_=y.createNodeIterator,T=y.getElementsByTagName,A=y.createDocumentFragment,$=c.importNode,x={};p.isSupported=w&&void 0!==w.createHTMLDocument&&9!==l.documentMode;var N=Ve,k=We,M=Ge,S=Qe,C=Ke,E=Ze,L=Ye,O=null,H=De({},[].concat(et(Re),et(Ie),et(je),et(qe),et(Pe))),D=null,F=De({},[].concat(et(ze),et(Be),et(Je),et(Ue))),R=null,I=null,j=!0,q=!0,P=!1,z=!1,B=!1,J=!1,U=!1,V=!1,W=!1,G=!1,Q=!1,Y=!1,K=!0,Z=!0,X=!1,ee={},te=De({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),ne=null,re=De({},["audio","video","img","source","image","track"]),ie=null,ae=De({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),oe=null,le=l.createElement("form"),se=function(e){oe&&oe===e||(e&&"object"===(void 0===e?"undefined":Xe(e))||(e={}),O="ALLOWED_TAGS"in e?De({},e.ALLOWED_TAGS):H,D="ALLOWED_ATTR"in e?De({},e.ALLOWED_ATTR):F,ie="ADD_URI_SAFE_ATTR"in e?De(Fe(ae),e.ADD_URI_SAFE_ATTR):ae,ne="ADD_DATA_URI_TAGS"in e?De(Fe(re),e.ADD_DATA_URI_TAGS):re,R="FORBID_TAGS"in e?De({},e.FORBID_TAGS):{},I="FORBID_ATTR"in e?De({},e.FORBID_ATTR):{},ee="USE_PROFILES"in e&&e.USE_PROFILES,j=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,P=e.ALLOW_UNKNOWN_PROTOCOLS||!1,z=e.SAFE_FOR_JQUERY||!1,B=e.SAFE_FOR_TEMPLATES||!1,J=e.WHOLE_DOCUMENT||!1,W=e.RETURN_DOM||!1,G=e.RETURN_DOM_FRAGMENT||!1,Q=e.RETURN_DOM_IMPORT||!1,Y=e.RETURN_TRUSTED_TYPE||!1,V=e.FORCE_BODY||!1,K=!1!==e.SANITIZE_DOM,Z=!1!==e.KEEP_CONTENT,X=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||L,B&&(q=!1),G&&(W=!0),ee&&(O=De({},[].concat(et(Pe))),D=[],!0===ee.html&&(De(O,Re),De(D,ze)),!0===ee.svg&&(De(O,Ie),De(D,Be),De(D,Ue)),!0===ee.svgFilters&&(De(O,je),De(D,Be),De(D,Ue)),!0===ee.mathMl&&(De(O,qe),De(D,Je),De(D,Ue))),e.ADD_TAGS&&(O===H&&(O=Fe(O)),De(O,e.ADD_TAGS)),e.ADD_ATTR&&(D===F&&(D=Fe(D)),De(D,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&De(ie,e.ADD_URI_SAFE_ATTR),Z&&(O["#text"]=!0),J&&De(O,["html","head","body"]),O.table&&(De(O,["tbody"]),delete R.tbody),we&&we(e),oe=e)},ue=function(t){xe(p.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=g}},ce=function(e,t){try{xe(p.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){xe(p.removed,{attribute:null,from:t})}t.removeAttribute(e)},de=function(e){var t=void 0,n=void 0;if(V)e="<remove></remove>"+e;else{var r=Me(e,/^[\r\n\t ]+/);n=r&&r[0]}var i=v?v.createHTML(e):e;try{t=(new h).parseFromString(i,"text/html")}catch(e){}if(o&&De(R,["title"]),!t||!t.documentElement){var a=(t=w.createHTMLDocument("")).body;a.parentNode.removeChild(a.parentNode.firstElementChild),a.outerHTML=i}return e&&n&&t.body.insertBefore(l.createTextNode(n),t.body.childNodes[0]||null),T.call(t,J?"html":"body")[0]};p.isSupported&&function(){try{var e=de("<x/><title>&lt;/title&gt;&lt;img&gt;");Le(/<\/title/,e.querySelector("title").innerHTML)&&(o=!0)}catch(e){}}();var pe=function(e){return _.call(e.ownerDocument||e,e,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT,function(){return n.FILTER_ACCEPT},!1)},me=function(e){return"object"===(void 0===m?"undefined":Xe(m))?e instanceof m:e&&"object"===(void 0===e?"undefined":Xe(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},fe=function(e,t,n){x[e]&&_e(x[e],function(e){e.call(p,t,n,oe)})},he=function(e){var t,n=void 0;if(fe("beforeSanitizeElements",e,null),!((t=e)instanceof s||t instanceof f||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof a&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute&&"string"==typeof t.namespaceURI))return ue(e),!0;var r=ke(e.nodeName);if(fe("uponSanitizeElement",e,{tagName:r,allowedTags:O}),("svg"===r||"math"===r)&&0!==e.querySelectorAll("p, br").length)return ue(e),!0;if(O[r]&&!R[r])return"noscript"===r&&Le(/<\/noscript/i,e.innerHTML)||"noembed"===r&&Le(/<\/noembed/i,e.innerHTML)?(ue(e),!0):(!z||e.firstElementChild||e.content&&e.content.firstElementChild||!Le(/</g,e.textContent)||(xe(p.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=Se(e.innerHTML,/</g,"&lt;"):e.innerHTML=Se(e.textContent,/</g,"&lt;")),B&&3===e.nodeType&&(n=e.textContent,n=Se(n,N," "),n=Se(n,k," "),e.textContent!==n&&(xe(p.removed,{element:e.cloneNode()}),e.textContent=n)),fe("afterSanitizeElements",e,null),!1);if(Z&&!te[r]&&"function"==typeof e.insertAdjacentHTML)try{var i=e.innerHTML;e.insertAdjacentHTML("AfterEnd",v?v.createHTML(i):i)}catch(e){}return ue(e),!0},be=function(e,t,n){if(K&&("id"===t||"name"===t)&&(n in l||n in le))return!1;if(q&&Le(M,t));else if(j&&Le(S,t));else{if(!D[t]||I[t])return!1;if(ie[t]);else if(Le(L,Se(n,E,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Ce(n,"data:")||!ne[e])if(P&&!Le(C,Se(n,E,"")));else if(n)return!1}return!0},ve=function(e){var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0;fe("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:D};for(a=o.length;a--;){var s=t=o[a],u=s.name,c=s.namespaceURI;if(n=Ee(t.value),r=ke(u),l.attrName=r,l.attrValue=n,l.keepAttr=!0,l.forceKeepAttr=void 0,fe("uponSanitizeAttribute",e,l),n=l.attrValue,!l.forceKeepAttr){if("name"===r&&"IMG"===e.nodeName&&o.id)i=o.id,o=Ne(o,[]),ce("id",e),ce(u,e),Te(o,i)>a&&e.setAttribute("id",i.value);else{if("INPUT"===e.nodeName&&"type"===r&&"file"===n&&l.keepAttr&&(D[r]||!I[r]))continue;"id"===u&&e.setAttribute(u,""),ce(u,e)}if(l.keepAttr)if(z&&Le(/\/>/i,n))ce(u,e);else if(Le(/svg|math/i,e.namespaceURI)&&Le(Oe("</("+Ae(ye(te),"|")+")","i"),n))ce(u,e);else{B&&(n=Se(n,N," "),n=Se(n,k," "));var d=e.nodeName.toLowerCase();if(be(d,r,n))try{c?e.setAttributeNS(c,u,n):e.setAttribute(u,n),$e(p.removed)}catch(e){}}}}fe("afterSanitizeAttributes",e,null)}},ge=function e(t){var n=void 0,r=pe(t);for(fe("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)fe("uponSanitizeShadowNode",n,null),he(n)||(n.content instanceof d&&e(n.content),ve(n));fe("afterSanitizeShadowDOM",t,null)};return p.sanitize=function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!me(e)){if("function"!=typeof e.toString)throw He("toString is not a function");if("string"!=typeof(e=e.toString()))throw He("dirty is not a string, aborting")}if(!p.isSupported){if("object"===Xe(u.toStaticHTML)||"function"==typeof u.toStaticHTML){if("string"==typeof e)return u.toStaticHTML(e);if(me(e))return u.toStaticHTML(e.outerHTML)}return e}if(U||se(t),p.removed=[],"string"==typeof e&&(X=!1),X);else if(e instanceof m)1===(r=(n=de("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?n=r:n.appendChild(r);else{if(!W&&!B&&!J&&-1===e.indexOf("<"))return v&&Y?v.createHTML(e):e;if(!(n=de(e)))return W?null:g}n&&V&&ue(n.firstChild);for(var l=pe(X?e:n);i=l.nextNode();)3===i.nodeType&&i===a||he(i)||(i.content instanceof d&&ge(i.content),ve(i),a=i);if(a=null,X)return e;if(W){if(G)for(o=A.call(n.ownerDocument);n.firstChild;)o.appendChild(n.firstChild);else o=n;return Q&&(o=$.call(c,o,!0)),o}var s=J?n.outerHTML:n.innerHTML;return B&&(s=Se(s,N," "),s=Se(s,k," ")),v&&Y?v.createHTML(s):s},p.setConfig=function(e){se(e),U=!0},p.clearConfig=function(){oe=null,U=!1},p.isValidAttribute=function(e,t,n){oe||se({});var r=ke(e),i=ke(t);return be(r,i,n)},p.addHook=function(e,t){"function"==typeof t&&(x[e]=x[e]||[],xe(x[e],t))},p.removeHook=function(e){x[e]&&$e(x[e])},p.removeHooks=function(e){x[e]&&(x[e]=[])},p.removeAllHooks=function(){x={}},p}()}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),window.previewBeforeSubmit=new function(){var o,N=["select","radio","checkbox","file","combined","email","address","datetime","time","birthdate","radio","number","autocomplete","text","textarea","signature","div","slider","widget","control_head","control_image","form_section","matrix","html","image","rating","control_appointment","control_inline","control_scale","dynamicQrcode"],k=["control_captcha"],M=[],l="Review Answers",r="Back to Form",i="Print",a=null;function s(t){t.setAttribute("type","button"),t.observe("click",u),t.update(l),f()&&setTimeout(function(){t.removeClassName("form-submit-button");var e=new Element("button",{type:"button"}).addClassName("dummy-form-submit-button").addClassName(t.readAttribute("data-class")).update(t.readAttribute("data-text")).hide();t.hasAttribute("disabled")&&(t.removeAttribute("disabled"),e.setAttribute("disabled","disabled")),t.parentNode.insert(e)},1e3)}function u(e){if(m(),"LmForm"in window&&LmForm.validateAll()){o=this,LmForm.noJump||(null==LmForm.forms[0]||void 0===LmForm.forms[0]?$($$(".lmform-form")[0].id):LmForm.forms[0]).scrollIntoView();for(var t=document.querySelectorAll(".form-section"),n=0;n<t.length;n++)t[n].addClassName("printProcess");for(var r=document.querySelectorAll(".form-line"),i=0;i<r.length;i++)r[i].addClassName("printProcess");var a=setInterval(function(){if((o.next(".dummy-form-submit-button")?o.next(".dummy-form-submit-button"):o).hasClassName("lastDisabled")){clearInterval(a),h(),d("preview");var e=$$(".checkedSubmit");e.invoke("update",l),e.invoke("enable");var t=setInterval(function(){void 0!==$("checkSubmission").retrieve("ready")&&(clearInterval(t),o.stopObserving("click",u),o.setAttribute("type",o.readAttribute("data-type")),o.update(o.readAttribute("data-text")),LmForm.validateAll()&&o.removeAttribute("disabled"),f()&&o.next(".dummy-form-submit-button")&&(o.next(".dummy-form-submit-button").remove(),o.addClassName(o.readAttribute("data-class"))),$("previewButtons").insert({bottom:o}))},60)}},60)}else LmForm.showButtonMessage()}function c(){var e=$$(".checkedSubmit").first().className;e=e.replace("checkedSubmit","");var t=new Element("button",{id:"backToForm",type:"button"}).addClassName(e).update(r).observe("click",function(){d("back"),function(){a.show(),$("backToForm").remove(),$("checkSubmission").hide();for(var e=document.querySelectorAll(".form-line"),t=0;t<e.length;t++)e[t].removeClassName("printProcess");for(var n=document.querySelectorAll(".form-section"),r=0;r<n.length;r++)n[r].removeClassName("printProcess");if(p()&&$("printForm").remove(),o){s(o);var i=o.id;$$(".preview-button-marking-"+i).first().insert({bottom:o})}}(),LmForm.iframeHeightCaller()});if($("previewButtons").insert(t),p()){var n=new Element("button",{id:"printForm",type:"button"}).addClassName(e).setStyle({marginRight:"10px"}).update(i).observe("click",function(){window.print()});$("previewButtons").insert(n)}}function d(e){if($$(".tabs-list").length){var t=$$(".tabs-list").first();"preview"===e?t.hide():t.show()}}function p(){return"No"!==("undefined"==typeof enablePrint||enablePrint)}function m(e){$$(".form-line").each(function(e){var t=e.id.split("_")[1];if("widget"===LmForm.getInputType(t)){var n=$("input_"+t);(n.hasClassName("widget-required")||n.hasClassName("validate[required]"))&&(""===n.value&&LmForm.isVisible(e)?LmForm.errored(n,LmForm.texts.required):LmForm.corrected(n))}})}function f(){return"object"==typeof qq&&"function"==typeof qq.FileUploader}function h(e){var t=$("checkSubmission"),n="";n+='<div id="previewContainer">',n+="<ul>";var r="";r=window.FORM_MODE&&"cardform"===window.FORM_MODE?".jfForm-all":".form-section",$$(r).each(function(e,t){e.attributes.id&&"cardAnimationWrapper"!==e.attributes.id.value||!0===LmForm.hidePages[t+1]||(n+=function e(t,n){n||(n=0),t=t.children;for(var r,i,a=new Element("div"),o=n;o<t.length;o++){var l=t[o].id.split("_")[1],s=t[o].getAttribute("data-type");if(!(-1<k.indexOf(s))){var u=LmForm.getInputType(l);if("control_matrix"===s?u="matrix":"control_head"===s?u="control_head":"control_image"===s?u="control_image":"control_appointment"===s?u="control_appointment":"control_inline"===s?u="control_inline":"control_scale"===s?u="control_scale":~t[o].className.indexOf("form-section")||~t[o].className.indexOf("form-section-closed")?u="form_section":"control_widget"==s&&t[o].querySelector('[id^="dynamicQrcode_"]')?u="dynamicQrcode":u||(u=""),$A(N).include(u)){var c={};try{var d=Preview_CheckInput.getValue(l,u);if(d=void 0!==d?d:"","matrix"===u){var p=$$("#id_"+l+" select").collect(function(e){return e.value}).any(),m=$$("#id_"+l+' input[type="text"]').collect(function(e){return e.value}).any(),f=$$("#id_"+l+' input[type="tel"]').collect(function(e){return e.value}).any(),h=$$("#id_"+l+' input[type="number"]').collect(function(e){return e.value}).any(),b=$$("#id_"+l+' input[type="radio"]').collect(function(e){return e.checked}).any(),v=$$("#id_"+l+' input[type="checkbox"]').collect(function(e){return e.checked}).any();"combined"===LmForm.getInputType(l)?p||m||f||h||b||v||(d=""):LmForm.fieldHasContent(l)||p||m||f||h||b||v||(d="")}(c={label:S(l),value:d}).label=!1===c.label?"":c.label}catch(e){console.error("ERROR",e.hasOwnProperty("getMessage")?e.getMessage():e),c.value="",c.label=""}if(!(-1!==M.indexOf((r=c.label.replace(/\s+\*/,""),i=void 0,i=document.createElement("textarea"),i.innerHTML=r,i.value).trim())||-1!==M.indexOf(c.label)||"none"===t[o].style.display||""===c.value&&"No"===showEmptyInputs||"control_head"===u&&"No"===showTitle||t[o].hasClassName("form-field-hidden")||t[o].hasClassName("always-hidden"))){var g=c.value;if("string"==typeof g&&g.indexOf("data:image/")+1&&(c.value='<img src="'+c.value+'">'),"signature"===u&&LmForm.isEditMode()&&(c.value=c.value.replace(/\"(\/uploads[^_]+_signature_[\d]+\.png)\"/,'"'+window.location.origin+'$1"')),("form_section"!==u||"No"!==showCollapsible)&&(c.value||"Yes"===showEmptyInputs)){var y=!1===c.label||"html"===u||"form_section"===u,w=new Element("li").addClassName(u);w.setAttribute("data-qid",l);var _=y?"":new Element("div").addClassName("label_i").insert(c.label),T=DOMPurify&&"function"==typeof DOMPurify.sanitize?DOMPurify.sanitize(c.value):"",A="control_head"!==u?"div":"h1",$=new Element(A).addClassName("value").insert(T);y?$.addClassName("no-label"):$.addClassName("border"),a.insert(w.insert(_).insert($))}if("form_section"==u){var x=new Element("ul").insert(e(t[o],1));a.insert(x)}}}}}return this.printHTML=a.innerHTML,a.innerHTML}(e))}),n+='<li class="noprint"><div id="previewButtons"></div></li>',n+="</ul>",t.update("").insert(n),void 0===e?(c(),$$(".form-section").each(function(e){LmForm.isVisible(e)&&(a=e).hide()}),t.show()):t.hide(),LmForm.iframeHeightCaller(),t.store("ready",!0)}function S(e){if($("label_"+e)){if(window.FORM_MODE&&"cardform"===window.FORM_MODE){for(var t=$("label_"+e).childNodes,n="",r=0;r<t.length;r++)n+=t[r].textContent;return n}return $("label_"+e).innerHTML.strip().stripTags().replace(/\n/g," ").replace(/\s+/g," ")}return $("text_"+e)?$("text_"+e).innerHTML.strip().stripTags().replace(/\n/g," ").replace(/\s+/g," "):""}this.init=function(){"undefined"==typeof showTitle&&(showTitle="No"),"undefined"==typeof showCollapsible&&(showCollapsible="No"),M="undefined"!=typeof deleteId&&""!==deleteId.strip()&&"<empty>"!==deleteId?deleteId.split(/\r\n|\r|\n/g):[],l="undefined"!=typeof buttonName&&""!==buttonName.strip()&&"<empty>"!==buttonName?buttonName:l,r="undefined"!=typeof backButtonText&&""!==backButtonText.strip()&&"<empty>"!==backButtonText?backButtonText:r,i="undefined"!=typeof printButtonLabel&&""!==printButtonLabel.strip()&&"<empty>"!==printButtonLabel?printButtonLabel:i,$$(".form-all").first().insert("<div id='checkSubmission'></div>"),$A($$(".form-submit-button[type=submit]")).each(function(e){e.setAttribute("data-type",e.readAttribute("type")),e.setAttribute("data-text",e.innerHTML.trim()),e.addClassName("checkedSubmit"),e.className.match(/form-submit-button-/gi)||e.addClassName("preview-submission-button"),e.setAttribute("data-class","form-submit-button");var t=document.querySelector("[data-component='widget-directEmbed']"),n=t&&t.style.getPropertyValue("text-align");e.parentNode.style.justifyContent=n,e.parentNode.addClassName("review-button-wrapper preview-button-marking-"+e.id),s(e)})},this.checkSubmission=h,this.displayWidgetErrors=m,this.printHTML=null},document.observe("dom:loaded",function(){window.previewBeforeSubmit.init()}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var Preview_CheckInput=function(){var e={},B="widget_metadata";function J(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t&&null!==t)return!0}catch(e){}return!1}function U(e){e=e.replace(/"([^"]+)":/g,'"$1 ":');var t=JSON.parse(e);if(Array.isArray(t[0])){var n=new Element("table",{border:"0",cellpadding:"5",cellspacing:"0",width:"100%"}).addClassName("table-grid"),o=new Element("tbody").addClassName("table-body");$A(t).each(function(e,t){var n=new Element("tr");n.addClassName("table-row"),o.insert(n);for(var r=0;r<e.length;r++)if(0==t){var i=new Element("th").addClassName("Row-"+t).update(l(e[r]));n.insert(i)}else if(0!=r){var a=new Element("td").addClassName("table-col").update(l(e[r]));n.insert(a)}else{i=new Element("th").addClassName("Row-"+t).update(l(e[r]));n.insert(i)}})}else{n=new Element("table",{border:"0",cellpadding:"5",cellspacing:"0",width:"100%"}).addClassName("table-grid"),o=new Element("tbody").addClassName("table-body");$A(t).each(function(e,t){if(t<1){var r=new Element("tr").addClassName("table-row");$H(e).each(function(e,t){var n=new Element("th").addClassName("table-head").update(e.key);o.insert(r.insert(n))})}r=new Element("tr");$H(e).each(function(e,t){var n=new Element("td").addClassName("table-col").update(l(e.value));o.insert(r.insert(n))})})}return n.insert(o),n}function l(e,t){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function V(e){return e.replace(/^[\n\t ]+/,"").replace(/[\n\t ]+$/,"")}return e.getValue=function(l,o){var e,t=window.newDefaultTheme&&"v2"===window.newDefaultTheme,n=window&&window.LmForm&&window.LmForm.extendsNewTheme,r=window.FORM_MODE&&"cardform"===window.FORM_MODE,i="";switch(o){case"rating":var a=$("input_"+l);a.down("input").value.empty()||(i=a.innerHTML);break;case"div":$$("#input_"+l).each(function(e,t){i=e.innerHTML});break;case"matrix":if(r)var s,u=(s=$("matrix_"+l).clone(!0)).select('div[role="grid"]').first();else(u=(s=$("cid_"+l).clone(!0)).select("table").first()).writeAttribute("width","100%"),u.className="table-grid",u.select("tbody").first().addClassName("table-body"),u.select("th").each(function(e){e.className="","none"!==e.getStyle("border")&&e.addClassName("table-head")}),u.select("td").each(function(e){e.className="",e.addClassName("table-col")});u.select("input").each(function(e,t){e.writeAttribute("id",!1),e.writeAttribute("name",!1),e.writeAttribute("class",!1);var n=e.nodeName.toLowerCase(),r=$("id_"+l).select(n)[t],i=e.readAttribute("type");if(i&&-1<["radio","checkbox"].indexOf(i)){var a="";r.checked&&(a=new Element("img",{src:"https://cdn.jotfor.ms/images/tick.png",alt:"checked",title:"Checked"})),e.parentNode.update(a)}else if(i&&-1<["text","tel","number"].indexOf(i)){var o=e.getValue()?e.getValue():"";e.parentNode.update(o)}e.setAttribute("disabled","disabled")}),u.select("select").each(function(e,t){e.writeAttribute("id",!1),e.writeAttribute("name",!1),e.writeAttribute("class",!1);var n=e.nodeName.toLowerCase(),r=$("id_"+l).select(n)[t],i=r.getValue()?r.getValue():"";e.parentNode.update(i),e.setAttribute("disabled","disabled")}),"No"===showEmptyInputs&&u.select("tr").each(function(e,t){0<e.select("td").length&&e.select("td").length==e.select("td:empty").length&&e.remove()}),i=r?u.innerHTML:s.innerHTML;break;case"form_section":$$("#collapse-text_"+l).each(function(e,t){i=e&&0<e.innerHTML.stripTags().length?V(e.innerHTML.stripTags()):""});break;case"control_head":$$("#header_"+l).each(function(e,t){if(e&&0<e.innerHTML.stripTags().length){i=V(e.innerHTML.stripTags());var n=e.parentNode.select(".form-subHeader");n&&0<n.length&&(i+="<br />"+n.first().outerHTML)}else i=""});break;case"radio":case"checkbox":var p=[];$$("#id_"+l+' input[type="'+o+'"]').each(function(e,t){if(("checkbox"!==o||!e.up(".form-product-child-table"))&&e.checked&&""!==e.name){if(e.hasClassName("form-checkbox-other")||e.hasClassName("form-radio-other"))S=e.up().down('input[type="text"]').getValue()||"";else if(e.hasClassName("form-product-input")){var n=$$("#"+e.id+"_price").length?$$("#"+e.id+"_price").first().up("span"):"";S=V($$("#product-name-"+e.id).first().innerHTML.stripTags()),S+=n&&0<n.innerHTML.stripTags().length?" "+V(n.innerHTML.stripTags()):""}else S=e.value;var l=[];if(e.up(".form-product-item")){var r=e.up(".form-product-item").select(".form-sub-label-container");if(r){var s=[];if($A(r).each(function(e,t){var n="textbox";e.down("select.form-dropdown")&&(n="dropdown");var r=[],i=e.select(".form-"+n).first();if(e.down("label.form-sub-label")){var a="- "+V(e.down("label.form-sub-label").innerHTML.stripTags());r.push(a)}var o=i.getValue();o&&""!==o&&"0"!==o&&(r.push(o),s.push(r.join(": ")))}),Object.isArray(s)&&0<s.length){for(S+='<ul class="preview-product">',t=0;t<s.length;t++)S+="<li>"+s[t]+"</li>";S+="</ul>"}}var i=e.up(".form-product-item").down(".form-product-child-table");if(i){var u=[],c=[],d=[];if(i.select("tr").each(function(e,t){if(0<t){var n=[],r=[],i=e.select(".form-product-child-label, .form-subproduct-option"),a=e.select('select[id*="_quantity_"], input[id*="_quantity_"]');if("No"===showEmptyInputs)for(var o=i.length-1;0<=o&&(!i[o].hasClassName("form-subproduct-option")||0!=V(i[o].getValue()))&&!(0<a.length&&0==V(a[0].getValue()));o--)i[o].hasClassName("form-product-child-label")?n.push(V(i[o].innerHTML.stripTags().replace(/(?:\r\n|\r|\n)/g,""))):i[o].hasClassName("form-subproduct-option")&&(l.push(i[o].getValue()),r.push(["- "+u[o],i[o].getValue()].join(": ")));else i.each(function(e,t){e.hasClassName("form-product-child-label")?n.push(V(e.innerHTML.stripTags().replace(/(?:\r\n|\r|\n)/g,""))):e.hasClassName("form-subproduct-option")&&(l.push(e.getValue()),r.push(["- "+u[t],e.getValue()].join(": ")))});c.push(n.join(" ")),d.push(r)}else e.select("th").each(function(e,t){u.push(V(e.innerHTML.stripTags()))})}),Object.isArray(c)&&Object.isArray(d)&&0<c.length){S+='<ul class="preview-subproducts">';for(var a=0;a<c.length;a++)if(S+="<li>"+c[a],0<d.length){for(S+='<ul class="preview-subproduct">',t=0;t<d[a].length;t++)S+="<li>"+d[a][t]+"</li>";S+="</ul></li>"}S+="</ul>"}}}e.hasClassName("form-product-has-subproducts")&&0===l.length||p.push(V(S))}}),i=p.join("<br/>");var c=$$("#id_"+l+" .total_area");if(c.length&&""!=i)for(var d=c.first().children,m=0;m<d.length;m++){var f=d[m].textContent||d[m].innerText;i+="<br />"+f.replace(/\s{2}/g," ")}break;case"select":i=$("input_"+l).getValue(),Array.isArray(i)&&(i=i.join("<br />"));break;case"number":1<$$("#id_"+l+' input[type="number"]').length?(p=[],$$("#id_"+l+' input[type="number"]').each(function(e){p.push(e.value)}),i=p.join(" ")):$("input_"+l).value.empty()||(i=parseFloat($("input_"+l).value));break;case"combined":case"grading":p=[],$$("#id_"+l+" select").each(function(e){e.value.empty()||p.push(e.value)}),$$("#id_"+l+' input[type="text"]').each(function(e){e.value.empty()||p.push(e.value)}),$$("#id_"+l+' input[type="tel"]').each(function(e){e.value.empty()||p.push(e.value)}),i=p.join(" ");break;case"datetime":p=[],$$("#id_"+l+' input[type="tel"]').each(function(e){p.push(e.value)}),$$("#id_"+l+" input.form-hidden-time").each(function(e){p.push(e.value)}),$$("#id_"+l+" select").each(function(e){p.push(e.value)}),2<p.length&&!p[0].empty()&&!p[1].empty()&&!p[0].empty()&&(i=p[0]+"/"+p[1]+"/"+p[2]),4<p.length&&!p[3].empty()&&!p[4].empty()&&(i+=" "+p[3]+":"+p[4],6!=p.length||p[5].empty()||(i+=" "+p[5]));break;case"time":p=[];var h=[],b=$("input_"+l+"_dummy");if(b=null!=b?'<b class="timeTotal"> '+(b=b.up(".form-sub-label-container").down("label").innerHTML.stripTags())+"</b>":"",t||n)$$("#id_"+l+' input[type="text"]').each(function(e){""!=e.value&&p.push(e.value)}),$$("#id_"+l+" select").each(function(e){h.push(e.value)}),(i=p[0])&&(1===h.length?i+=" "+h[0]:2===p.length&&(0===h.length?i+=" - "+p[1]+b:i+=" "+h[0]+" - "+p[1]+" "+h[1]+b));else{$$("#id_"+l+" select").each(function(e){p.push(e.value)});var v=p.length;p[0].empty()||(i=p[0]+":"+p[1],3===v?i+=" "+p[2]:4!==v||p[2].empty()?6!==v||p[3].empty()?2!==v&&(i=""):i+=" "+p[2]+" - "+p[3]+":"+p[4]+" "+p[5]+b:i+=" - "+p[2]+":"+p[3]+b)}break;case"textarea":i=$("input_"+l).hasClassName("custom-hint-group")?$("input_"+l).value===$("input_"+l).readAttribute("data-customhint")?"":$("input_"+l).value.replace(/(?:\r\n|\r|\n)/g,"<br />"):$("input_"+l).up("div").down(".nicEdit-main")?$("input_"+l).up("div").down(".nicEdit-main").innerHTML:$("input_"+l).value.replace(/(?:\r\n|\r|\n)/g,"<br />");break;case"birthdate":p=[],$$("#id_"+l+" select").each(function(e){p.push(e.value)}),p[0].empty()||p[1].empty()||p[2].empty()||(i=p[0]+" "+p[1]+" "+p[2]);break;case"address":p=[];var g=$$("#id_"+l+" .form-address-postal")[0];$$("#id_"+l+' input[type="text"]').each(function(e){e.value.empty()||p.push(e.value)}),$$("#id_"+l+" select").each(function(e){!e.value.empty()&&e.hasClassName("form-address-state")?g&&0<g.value.length?p.splice(p.length-1,0,e.value):p.push(e.value):e.value.empty()||p.push(e.value)}),i=p.join("<br/>");break;case"file":var y=$("id_"+l);if(0<y.select(".qq-uploader").length){var w=y.select(".qq-upload-list").first().children;if(0<w.length){var _=[];$A(w).each(function(e){if(!e.classList.contains("file-deleted")){var t=V(e.select(".qq-upload-file").first().innerHTML),n=V(e.select(".qq-upload-size").first().innerHTML),r=n?" ("+n+")":"";_.push(t+r)}}),i+=_.join("<br/>")}}else i=(i=$("input_"+l).value).substring(i.lastIndexOf("\\")+1);break;case"signature":var T=document.getElementById("cid_"+l),A=T.querySelector("img");if(A){var x=A.getAttribute("src");i='<div class="imgwrap"><img src="'+x+'"class="signature-image-'+l+'"/></div>'}else{var N=T.getElementsByClassName("jSignature")[0],k=(N.getContext("2d"),N.toDataURL());i=k}break;case"html":i=$$("#text_"+l).first().innerHTML;break;case"control_image":i=$$("#cid_"+l).first().innerHTML;break;case"widget":var M=$$(".widget-inputs-wrapper #input_"+l)[0];if(!M)return;var S=M.getValue();if(J(S)){if(!J(e=S)||!JSON.parse(e).hasOwnProperty(B))return(u=U(S)).outerHTML;var C=function(e){var t=[];if(!J(e))return t;var n=JSON.parse(e);return n.hasOwnProperty(B)&&(t=n[B]),t}(S),E=C.type,L=C.value;switch(E){case"links":case"imagelinks":var O=[],H="\n";return L.each(function(e,t){var n=e.name?e.name.replace(/\u00a0/g,""):"",r=e.url;r&&("imagelinks"===E?(O.push('<div class="imgwrap"><img src="'+r+'" title="'+n+'" alt="image" class="image label"/>'+n+"</div>"),H=""):O.push(n))}),0<O.length?O.join(H):"";case"html":return decodeURIComponent(L[0].html);case"htmltext":return atob(L);default:return"N/A"}return"N/A"}return 0<S.search(/\r\n|\r|\n/g)?S=$("input_"+l).up('[data-widget-name="Inventory"]')?S.replace("\n0",""):S.replace(/\r\n|\r|\n/g,"<br/>"):null!=S.match(/\.(jpg|jpeg|gif|png)$/i)&&(S='<div class="imgwrap"><img src="/'+S+'" alt="image" class="image label"/></div>'),S;case"control_appointment":var D,F=$("input_"+l+"_date"),R=$("input_"+l+"_timezone");try{D=R.getAttribute("value").split(" ")[0]}catch(e){D="Europe/Istanbul"}var I=F&&F.value;if(I){var j={weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short",timeZone:D,hour12:!0},q=document.documentElement.lang,P=new Intl.DateTimeFormat(q,j).format(new Date(I));i=P}else i="";break;case"control_inline":var z=[];return $$("#cid_"+l+" input").each(function(e,t){if(e.value&&"none"!==e.up("span").style.display){var n=e.value,r="";-1<e.name.indexOf("hourSelect")||-1<e.name.indexOf("minuteSelect")?n="":-1<e.name.indexOf("timeInput")&&(r=e.up("span").down("label").innerText||"Time",e.up("span").up("span").down("select")&&(n=n+" "+e.up("span").up("span").down("select").value)),"radio"!==e.type&&"checkbox"!==e.type||(n="",e.checked&&(r="radio"===e.type?"Single Choice":"Multiple Choice",n=e.value)),-1<e.id.indexOf("input_signature")&&e.value&&(r=e.up("span").down("label").innerText||"Signature",n="Signed");var i={name:r||e.up("span").down("label").innerText||"Text Box",value:n}}n&&z.push(i)}),$$("#cid_"+l+" select").each(function(e,t){if("selectbox"===e.up("span").readAttribute("data-type")){var n=e.value;if(n){var r={name:e[0].label,value:n};z.push(r)}}}),(u=U(JSON.stringify(z))).outerHTML;case"control_scale":$$("#id_"+l+' input[type="radio"]').each(function(e,t){e.checked&&(i=e.value)});break;case"dynamicQrcode":$("dynamicQrcode_"+l)&&(i=$("dynamicQrcode_"+l).querySelector("img").src);break;default:$("input_"+l)&&!$("input_"+l).name.match(/captcha/)&&void 0!==$("input_"+l).value&&(i=$("input_"+l).value)}return i},e}();
//# sourceMappingURL=scripts.min.js.map